@model DoAn_LapTrinhWeb.Models.Account
@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/Main_Layout.cshtml";
    var discountPrice = Convert.ToDouble(ViewBag.Discount);
    var total = Convert.ToDouble(ViewBag.Total);    // Giá sau khi áp dụng mã giảm giá, được tính ở controller
    var price = total + discountPrice;  // giá gốc trước khi giảm
    var shippingFee = 30000d;           // Phí vận chuyển 30k
    total += shippingFee;
    TempData["Total"] = total;
}
<!--begin::Container-->
<div class="container center margin_mobile_fixed">
    <!--begin::Col-->
    <div class="col-md-9">
        <!--begin::Form-->
        <form method="post" action="@Url.Action("SaveOrder","Cart")">
            <!--begin::Payment and Delivery-->
            <div class="Module Module-359">
                <div class="ModuleContent">
                    <!--begin::Section-->
                    <section class="cart-step">
                        <div class="cart-title">
                            <i class="material-icons">payment</i>
                            <span>Phương thức thanh toán</span>
                        </div>
                        <div class="cart-payment">
                            <div class="payment-method">
                                <!-- start list phương thức thanh toán -->
                                <ul class="r-tabs-nav">
                                    <li class="method-select r-tabs-tab r-tabs-state-active">
                                        <a class="r-tabs-anchor" data-toggle="collapse" href="#payment1" role="button" aria-expanded="false" aria-controls="payment1">
                                            <label class="method-item" data-id="1">
                                                <div class="icon">
                                                    <img src="~/Images/it_service/cod.png" />
                                                </div>
                                                <div class="name">Thanh toán khi nhận hàng</div>
                                            </label>
                                        </a>
                                    </li>
                                    <li class="method-select">
                                        <a class="r-tabs-anchor" data-toggle="collapse" href="#payment2" role="button" aria-expanded="true" aria-controls="payment2">
                                            <label class="method-item" data-id="1">
                                                <div class="icon">
                                                    <img src="~/Images/it_service/qrpay.png" />
                                                </div>
                                                <div class="name">Thanh toán qua VNPAY-QR</div>
                                            </label>
                                        </a>
                                    </li>
                                    <li class="method-select ">
                                        <a class="r-tabs-anchor" data-toggle="collapse" href="#payment3" role="button" aria-expanded="true" aria-controls="payment3">
                                            <label class="method-item" data-id="1">
                                                <div class="icon">
                                                    <img src="~/Images/it_service/momo.png">
                                                </div>
                                                <div class="name">Thanh toán qua ví Momo, ViettelPay</div>
                                            </label>
                                        </a>
                                    </li>
                                    <li class="method-select ">
                                        <a class=" r-tabs-anchor" href="#tab1">
                                            <label class="method-item" data-id="1">
                                                <div class="icon">
                                                    <img src="~/Images/it_service/internetbanking.png">
                                                </div>
                                                <div class="name">Thanh toán qua Internet Banking</div>
                                            </label>
                                        </a>
                                    </li>
                                    <li class="method-select">
                                        <a class=" r-tabs-anchor" data-toggle="collapse" href="#payment4" role="button" aria-expanded="true" aria-controls="payment4">
                                            <label class="method-item" data-id="1">
                                                <div class="icon">
                                                    <img src="~/Images/it_service/visa.png">
                                                </div>
                                                <div class="name">Thanh toán bằng thẻ thanh toán quốc tế</div>
                                            </label>
                                        </a>
                                    </li>
                                    <li class="method-select ">
                                        <a class=" r-tabs-anchor" href="#tab1">
                                            <label class="method-item" data-id="1">
                                                <div class="icon">
                                                    <img src="~/Images/it_service/tragop.png">
                                                </div>
                                                <div class="name">Thanh toán qua trả góp</div>
                                            </label>
                                        </a>
                                    </li>
                                </ul>
                                <!-- end list phương thức thanh toán -->
                                <!-- start thanh toan vnpayqr-->
                                <div class="method-content">
                                    <div class="content" id="payment1">
                                        <div class="method-img"><img alt="" src="/Data/Sites/1/media/icon/cart/m1.png"></div>
                                        <div class="method-detail">
                                            <div class="method-name">Thanh toán khi nhận hàng</div>
                                            <div class="method-des accordion-body">
                                                Quý khách sẽ thanh toán bằng
                                                <strong>tiền mặt</strong>
                                                khi đơn vị vận chuyển giao hàng giao hàng tận nơi.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end thanh toan vnpayqr-->
                                <!-- start thanh toan khi nhận hàng -->
                                <div class="method-content ">
                                    <div class="content collapse " id="payment2">
                                        <div class="row ">
                                            <div class="col-md-2">
                                                <center><img alt="Thanh toán online qua mã QR" src="~/Images/it_service/qrpay.png" style="width: 64px; height: auto;"></center>
                                            </div>
                                            <div class="col-md-10">
                                                <p>Thanh toán qua mã QR thông qua VNPAY . </p>
                                                <p><span style="font-weight: bold; color: red;">Lưu ý:</span> Bạn cần tải ứng dụng <strong>Internet Banking</strong> trên điện thoại trước để thực hiện giao dịch .</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end thanh toan khi nhận hàng -->
                                <!-- start thanh toan vnpayqr-->
                                <div class="method-content ">
                                    <div class="content collapse " id="payment3">
                                        <div class="row ">
                                            <div class="col-md-2">
                                                <center><img alt="Thanh toán qua ví Momo, ViettelPay" src="~/Images/it_service/momo.png" style="width: 64px; height: auto;"></center>
                                            </div>
                                            <div class="col-md-10">
                                                <p>Thanh toán qua ví Momo, ViettelPay . </p>
                                                <p><span style="font-weight: bold; color: red;">Lưu ý:</span> Bạn cần tải ứng dụng <strong>Momo hoăc ViettelPay</strong> trên điện thoại trước để thực hiện giao dịch. </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end thanh toan vnpayqr-->
                                <!--start thanh toan bang thẻ quốc tế-->
                                <div class="method-content collapse" id="payment4">
                                    <div class="content ">
                                        <div class="method-img"><img alt="" src="/Data/Sites/1/media/icon/cart/m4.png"></div>
                                        <div class="method-detail ">
                                            <div class="method-name">Thanh toán bằng thẻ thanh toán quốc tế</div>
                                            <div class="method-des">
                                                Hỗ trợ thẻ Visa,Master .
                                                Bạn sẽ được chuyển tới&nbsp;cổng thanh toán quốc tế do <a href="https://alepay.vn/index#/alepay">Ngân Lượng</a> làm đại diện để thanh toán.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end thanh toán bằng thẻ quốc tế-->
                            </div>
                        </div>
                    </section>
                    <!--end::Section-->
                </div>
            </div>
            <!--end::Payment and Delivery-->
            <!--begin::Row-->
            <div class="row mb-20px ">
                <div class=" col-md-6 info_total">
                    <div class="user-page">
                        <div class="page-title">Thông tin Người nhận</div>
                        <!--begin::Form-->
                        <div class="user-form">
                            <div class="form-wrap">
                                <div>
                                    <!--begin::Input Form Group-->
                                    <div class="settingrow form-group mb-4">
                                        <label class="settinglabel control-label col-sm-4">Họ tên</label>
                                        <!--end::Label-->
                                        <div class="col-sm-8">
                                            <input type="text" readonly value="@Model.Name" required tabindex="1" class="form-control"><span title="Vui lòng nhập họ tên." style="display: none">Vui lòng nhập họ tên.</span>
                                        </div>
                                    </div>
                                    <!--end::Input Form Group-->
                                    <!--begin::Input Form Group-->
                                    <div class="settingrow form-group mb-4">
                                        <!--begin::Label-->
                                        <label class="settinglabel control-label col-sm-4">Địa chỉ</label>
                                        <!--end::Label-->
                                        <div class="col-sm-8">
                                            <input type="text" readonly value="@Model.Addres_1" required tabindex="2" class="form-control">
                                            <span title="Vui lòng nhập địa chỉ." style="display: none">Vui lòng nhập địa chỉ.</span>
                                        </div>
                                    </div>
                                    <!--end::Input Form Group-->
                                    <!--begin::Input Form Group-->
                                    <div class="settingrow form-group mb-4">
                                        <!--begin::Label-->
                                        <label class="settinglabel control-label col-sm-4">Số điện thoại</label>
                                        <!--end::Label-->
                                        <div class="col-sm-8">
                                            <input type="text" readonly value="@Model.Phone"
                                                   required maxlength="10" tabindex="3" class="form-control" />
                                            <span title="Vui lòng nhập địa chỉ." style="display: none">Vui lòng nhập điện thoại.</span>
                                        </div>
                                    </div>
                                    <!--end::Input Form Group-->
                                    <!--begin::Input Form Group-->
                                    <div class="settingrow form-group  mb-4">
                                        <!--begin::Label-->
                                        <label class="settinglabel control-label col-sm-4">Lời nhắn</label>
                                        <!--end::Label-->
                                        <div class="col-sm-8">
                                            <textarea name="OrderNote" tabindex="4" cols="40" maxlength="200" class="w-100 form-control" rows="2" placeholder="Ví dụ: Giao hàng ngoài giờ hành chính"></textarea>
                                            <div class="form-des">(Không bắt buộc)</div>
                                        </div>
                                    </div>
                                    <!--end::Input Form Group-->
                                    <!--Begin::Action-->
                                    <div
                                         <!--Begin::Button-->
                                        <a href="@Url.Action("Editprofile", "Account")" class="ck_update_info">Cập nhật lại thông tin nhận hàng</a>
                                        <!--end::Button-->
                                    </div>
                                    <!--end::Action-->
                                </div>
                            </div>
                        </div>
                        <!--end::Form-->
                    </div>
                </div>
                <!--end thông tin nhận hàng-->
                <!--begin::Col-->
                <div class="col-md-6 info_total">
                    <div class="shopping-cart-cart pb-41px">
                        <!--begin::Title-->
                        <div class="page-title">Tóm tắt</div>
                        <!--end::Title-->
                        <!--begin::Table-->
                        <table>
                            <!--begin::Table Body-->
                            <tbody class="total_checkout">
                                <tr>
                                    <td>
                                        <div class="label">Tạm tính:</div>
                                    </td>
                                    <td class="text-right">
                                        <div class="value">@price.ToString("#,0")₫</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="label">Giảm giá:</div>
                                    </td>
                                    <td class="text-right">
                                        <div class="value">@discountPrice.ToString("#,0")₫</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="label">Phí vận chuyển:</div>
                                    </td>
                                    <td class="text-right">
                                        <div class="value">@shippingFee.ToString("#,0")₫</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="label">Thành tiền:</div>
                                    </td>
                                    <td class="text-right">
                                        <div class="value order-total h5 fw-bold text-danger text-si">@total.ToString("#,0")₫</div>
                                    </td>
                                </tr>
                            </tbody>
                            <!--begin::Table Body-->
                        </table>
                        <!--emd::Table-->
                        <!--begin::Action-->
                        <div class="ps-2 pe-2">
                            <!--begin::Button-->
                            <!--Đật hàng-->
                            <button type="submit" class="btn bg-button w-100 mt-2 mb-1">ĐẶT HÀNG NGAY</button>
                            <!--end::Button-->
                            <div class="text-danger center">(Bấm đặt hàng để xác nhận thanh toán)</div>
                        </div>
                        <!--end::Action-->
                    </div>
                </div>
                <!--end::Col-->
            </div>
            <!--end::Row-->
        </form>
    </div>
    <!--end thông tin người nhận-->
</div>
<!--end::Container-->